= Anypoint Studio May 2014 with 3.5.0 Runtime Release Notes
:keywords: release notes, anypoint studio


<<Migration Guide, Skip to Migration Guide>>

May 20, 2014

MuleSoft is pleased to announce the release of *Anypoint Studio May 2014 with 3.5.0 Runtime*.

Our new version of Anypoint Studio (formerly known as Mule Studio) functions as a single download and includes the 3.5.0 runtime with an Enterprise trial license. With two entirely new message processors – the Web Service Consumer and the Database Connector – this release offers some dramatic improvements to the way you build integration applications. Further, you can now take advantage of batch processing functionality,  scatter-gather functionality, and share resources between applications. Building on the existing DataSense functionality, Studio includes a DataSense Explorer that gives you design-time visibility into the data contained within the messages your application will process. 

Further, these release notes offer some detail on the tangentially released APIkit version 1.3. See <<New Features and Functionality>> section below.  Refer to our Release Strategy for full details about our most recently released runtimes and their deployment options.

* http://www.mulesoft.com/platform/soa/mule-esb-open-source-esb[Download Anypoint Studio with 3.5.0 Enterprise Runtime] to take advantage of the latest and greatest!
* http://www.mulesoft.com/platform/soa/mule-esb-open-source-esb[Download 3.5.0 Enterprise Runtime] to explore the newest features available with Mule ESB Enterprise with Mule Management Console.
* http://www.mulesoft.org/download-mule-esb-community-edition[Download 3.5.0 Community Runtime] to explore the newest features available with Mule Community without Studio. 

[TIP]
Upgrading from an existing instance of Mule Studio or previous Mule runtime version? Refer to the <<Migration Guide>>.

== Document Revision History

May 20, 2014, v1.0 Initial Publication. 

June 9, 2014, v1.1 Added issues fixed in Studio updates for build numbers *3.5.0-201405211612* and *3.5.0-201406061135*

== Current Release Version 


[%header,cols="3*"]
|===
|
| Enterprise Runtime
| Community Runtime

| ESB Runtime
| Version: 3.5.0 +
Build Number: 33a8b7d9
| Version: 3.5.0 +
Build Number: ff1df1f3

| Anypoint Studio
2+>| Version: Anypoint Studio May 2014 Release +
Build Number: 201405161032 (note: <<New or Fixed in this Release>> available)

| Management Console
2+>| Version: 3.5.0 +
Build Number: 9209ba42a1


| Mule DevKit
2+>| 3.5.0
|===

== New Features and Functionality

* *Mule Studio -> Anypoint Studio*: New name, same great taste! To better synchronize with our Anypoint Platform, Studio earned a new moniker to fit in with the rest of the crowd.
* *link:/mule-user-guide/v/3.7/database-connector[New Database Connector]*: This new connector allows you to connect with almost any JDBC relational database, consistently using the same interface for every case. You can run diverse SQL operations on your database, including Select, Insert, Update, Delete, and even Stored Procedures.
* *link:/mule-user-guide/v/3.7/web-service-consumer[New Web Service Consumer]*: This new connector allows you to consume a web service from within your Mule application using information automatically extracted from the service's WSDL using DataSense.
* *Palette Simplification*: In the Studio palette, Endpoints and Cloud Connectors categories have been merged in one category called link:/mule-user-guide/v/3.7/anypoint-connectors[Connectors].
* *link:/mule-user-guide/v/3.7/batch-streaming-and-job-execution[Batch Processing Improvements]*: Batch Processing now includes the ability to batch process non-serializable messages, and to stream batch commits. Further, you can now order the execution of batch job instances.
* *link:/mule-user-guide/v/3.7/shared-resources[Shared Resources]*: Need to share connectors and transaction managers between applications? Shared Resources gives you the ability to share configurations between applications and development teams, including the new Database Connector and the new Bitronix transaction manager.
* *link:/mule-user-guide/v/3.7/scatter-gather[Scatter-Gather]*:A routing message processor, Scatter-Gather, sends a request message to multiple targets concurrently. It collects the responses from all routes and aggregates them into a single message, but still allows you to implement sequential routing if desired.
* *link:/anypoint-studio/v/5/using-the-datasense-explorer[DataSense Explorer]*: This feature surfaces information about the Mule message – payload, variables, and properties – as it passes through your flow, relative to the building block you currently have selected on the canvas.
* *link:/mule-user-guide/v/3.7/invoke-component-reference[Invoke Message Processor]*: The Invoke message processor is newly exposed in the Studio interface.
* *link:/mule-user-guide/v/3.7/request-reply-scope[Request-Reply Scope]*: The Request-Reply scope is newly exposed in the Studio interface.
* *link:/mule-user-guide/v/3.7/fips-140-2-compliance-support[Support for FIPS 140-2 Compliance]*: Mule now can be configured to run in a FIPS 140-2 certified environment.
* *link:/mule-user-guide/v/3.7/until-successful-scope[Synchronous Until-Successful]*: New with 3.5.0, you can configure your until-successful scope to process messages synchronously, relative to your main flow. 
* *link:/mule-management-console/v/3.7/analyzing-flow-processing-and-payloads[Enhanced Flow Analyzer in MMC]*: We have enhanced the Flow Analyzer functionality by adding the ability to stop analysis automatically after a period of time. Further, privileged users can stop an ongoing analysis session.
* *Updates to MEL syntax*: Mule supports link:/mule-user-guide/v/3.7/mule-expression-language-reference[dot syntax] in MEL expressions. In Anypoint Studio, autocomplete supports this dot syntax for all object fields. However, you must use the bracket syntax for map access in cases where the keys are not strings or you need to evaluate an expression to obtain the actual key to use.
* *Jetty Acceptor Threads*: Now exposed in Mule, the Jetty acceptor threads enable tuning to handle larger loads and more clients. 
* *Upgraded HA*: We have upgraded the Hazelcast engine underlying Mule's High Availability clustering and added the ability to run HA clusters in link:/mule-management-console/v/3.7/managing-mule-high-availability-ha-clusters[performant mode] to prioritize performance over reliability.
* *XSD Validation Improvements*: We have improved the validation of XSDs in Mule applications, offering better validation and helpful error messages.
* *Better Performance with JMS:* Under a high load, use JMS session pooling to obtain better performance. 
* *Performance Improvements in DataMapper and HA:* The architecture of new 3.5.0 components – such as Database Connector, Web Service Consumer, and Scatter-Gather – take into account performance tuning best practices. Use an added Jetty attribute to further tune performance. 
* *OAuth 2.0 Out of the Box*: The OAuth 2.0 provider module is now bundled with the Mule ESB EE runtime. This means API Manager can now apply an OAuth policy against ESB 3.5.0.
* *Deprecation of JDBC endpoint*: With the introduction of the new Database Connector comes the deprecation of its predecessor, the JDBC endpoint. 
* *Deprecation of All flow control:* With the introduction of Scatter-Gather comes the deprecation of the All flow control. +
* *Anypoint Connector DevKit in Studio*: To build your own Anypoint Connector, you can use the link:/anypoint-connector-devkit/v/3.7[Anypoint Connector DevKit]. In the latest release of Anypoint Studio, you can add a Beta module that enables you to access DevKit functionality directly in Studio. Includes: +
** New Anypoint Connector wizard to easily create new connector projects
** Outline view to improve project navigation
** New code templates to facilitate quicker connector development
** DevKit error highlighting as you type
* *link:/api-manager/api-gateway-runtime-archive[API Gateway Runtime]:* Included is an agent that includes several fixes and improves performance for contract-based policies.
* *APIkit version 1.3:* Now included automatically in Studio, the newest version of APIkit includes improved functionality: +
** Improved user experience using the RAML Editor
** Ability to generate `!include` files from within the RAML Editor
** Ability to open the API Console within the Studio console
** Ability to create a separate API Console flow to host the console in a separate URI

== Hardware and Software System Requirements

For most use cases, Anypoint Studio with 3.5.0 Runtime does not change the hardware and software system requirements established by Mule Studio (December 2013) with CloudHub Mule Runtime (December 2013). MuleSoft recommends a minimum of 4GB RAM on a developer workstation. As applications become complex, consider adding more RAM.

Please mailto:https://www.mulesoft.com/support-and-services/mule-esb-support-license-subscription[Contact MuleSoft Support] with any questions you may have about system requirements.

== Deprecated in this Release

As Mule ESB evolves, components and APIs are sometimes replaced or superseded by an improved method of implementation. These elements are flagged as deprecated in the product and documentation in order to alert users to the change. This indicates they will continue to function and be supported in the product until the next major release version (4.x, 5.x, 6.x), but users are discouraged from using them and should consider migrating their applications. After the next major release version, they may be removed and no longer supported in the product.

Elements deprecated in the 3.5.0 runtime:

* JDBC endpoint and transport
* All flow control
* Maps to XML transformer
* XML to Maps transformer
* Maps to CSV transformer
* CSV to Maps transformer
* Resultset to Maps transformer
* Service Lookup endpoint

Note that current documentation may still reference these deprecated elements in legacy examples and code snippets for a period of time. These examples are being updated on a rolling basis with the new, recommended best practices and implementations.

== Important Notes and Known Issues in this Release

This list covers some of the known issues with Anypoint Studio with 3.5.0 Runtime. Please read this list before reporting any issues you may have spotted. 

=== Mule ESB

Note that only those tickets labeled with MULE apply to both the Enterprise and Community versions of the runtime; tickets labeled with EE apply only the Enterprise version.

[%header,cols="20a,80a"]
|===
|Issue |Description
|n/a |link:/mule-user-guide/v/3.7/batch-processing[Batch processing] does not support the use of link:/mule-management-console/v/3.7/migration-scripts-for-business-events[Business Events].
|n/a |link:/runtime-manager/insight[Insight] does not support visibility into batch processing.
|MULE-7585 |NPE when exporting from Database to CSV
|MULE-7583 |CopyOnWriteCaseInsensitiveMap should fully implement Map
|MULE-7582 |Hung threads on work manager.
|MULE-7519 |Default domain must be created in the new domain concept instead of the old one
|MULE-7517 |Regression in MuleContext mutability
|MULE-7493 |Not all property files are loaded before flow loading
|MULE-7456 |When redeployment fails because an error, the failure is not shown in console log
|MULE-7442 |Bulk Update fails using a file as a source when the file was generated in Windows due to \r at the end of the line
|MULE-7441 |Bulk Update fails when there is a space after the ending semicolon of a statement
|MULE-7328 |Can't use WS consumer with message properties
|MULE-7290 |It shouldn't be allowed to deploy an application to more than one domain
|MULE-7280 |Anchor file is created before application gets deployed
|MULE-7273 |Proxy service does not rewrite schema locations in the WSDL
|MULE-7245 |Eager initialization of BitronixXaDataSourceBuilder can make a mule application to fail on start
|MULE-7099 |Make bitronix transaction manager default TM
|MULE-7033 |Only one config element should be allowed for the same name
|MULE-6924 |Dynamic round robin does not work in cluster
|EE-4001 |Batch job doesn't finish, when the payloads of the processed records are bigger than 512KB.
|EE-4000 |High contention when updating statistics on batch.
|EE-3841 |Anchor file is created even if application fails to get deployed
|EE-3835 |Failed to connect to HTTP inbound endpoint just after startup
|EE-3830 |NullPointerException when enqueuing message to VM endpoint with a shared connector
|EE-3735 |Cluster and XA transactions cause message lost with high concurrency
|MULE-7594 |Scatter-gather throws exception when using a one-way outbound endpoint.
|MULE-7593 |Scatter-gather throws IllegalStateException when using only one message processor
|MULE-7592 |JMS caching-connection-factory doesn't close connections on redeploy
|EE-3141 |When using a Throttling policy with throttling statics enabled, Limit and Remaining statistics are swapped.
|===

=== Anypoint Studio

[%header,cols="20a,80a"]
|===
|Issue |Description
|n/a |Studio and Mavericks: If you are running OS X Mavericks, Studio cannot automatically find your Maven installation, so your home directory field will be blank and the Maven support boxes unchecked. Workaround: To use Maven with Anypoint Studio on Mavericks, configure your Maven home directory manually. Once you have configured a valid Maven home, click Test Maven Configuration to verify your settings.
|STUDIO-4914 |SAP: When unchecking Output XML option it is not possible to get the details or the files for the specified object. They are empty.
|n/a |Maven in Windows: To have good Maven support you need Eclipse to point to a JDK. In Windows by default you need to manually configure the JDK as Eclipse will look for the JRE. 
|STUDIO-4937 |CXF and REST Components: When using CXF or REST Message Processors, you may have some conflicts with the appearance of the response section of the flow on the canvas.
|STUDIO-4980 |Query Builder: This is a Mac-specific issue. The Query Builder UI misbehaves after a DataSense type structure retrieval operation. Workaround: close the Query Builder after the DataSense retrieval and open it again. 
|===

=== MMC - Mule Management Console

[%header,cols="20a,80a"]
|===
|Issue |Description
|n/a |link:/mule-management-console/v/3.7[Mule Management Console (MMC)] does not support visibility into batch processing.
|MMC-1756 |Inconsistencies when disbanding a cluster with one of the nodes down.
|MMC-1754 |Global Permissions - Error 500 message when Creating a new Alert Notification with only Manage Alert Notification permission.
|MMC-1738 |Dashboard -> Cluster Application status: When a cluster is disbanded the portlet ‘Cluster application status’ is continuously throwing an exception into the logs.
|MMC-1739 |Dashboard - Deployment Status portlet - Unable to see deployment of clusters that are into group.
|MMC-1695 |Sorting by column on all tables (flows, applications, deployments, etc.) is applied only for each page.
|===

=== APIkit

[%header,cols="20a,80a"]
|===
|Issue |Description
|n/a |APIkit's API console, and the API console itself, do not support resource owner and client credentials grant types. Further, the console does not support scopes in an application.
|n/a |APIkit's API console does not support the OAuth dance.
|===

=== DevKit

[%header,cols="20a,80a"]
|===
|Issue |Description
|DEVKIT-553 |_*Beta*_: When running an incremental build using the DevKit plugin in Studio, not all files are being processed, and errors that doesn't exist are reported 
|===

== New or Fixed in this Release

*_Update 2: Build Number 3.5.0-201406061135_* 

[%header,cols="20a,80a"]
|===
|Issue |Description
|STUDIO-3533 |Make combine-collections-transformer as MP in palette
|STUDIO-4571 |Receiving an invalid reference error when everything is in place
|STUDIO-5019 |DataSense doesn't work with mule specific system properties like app.home
|STUDIO-5032 |Cannot see errors for MEL
|STUDIO-5035 |MEL Validation should wait before validating
|STUDIO-5081 |DB connector not resolving place holders for driver class name
|STUDIO-5107 |Siebel connector rewrites xml
|STUDIO-5155 |Classloader leak with MEL classes when executing DataSense
|SE-874 |Incorrect validation in JDBC "query" element
|SE-876 |NPE when clicking certain message processors, details page doesn't show anything
|SE-907 |DataMapper editor breaks when combining it with WSConsumer
|SE-603 |Export Without Source Code
|===

*_Update 1: Build Number 3.5.0-201405211612_*

[cols="2*"]
|===
|STUDIO-5110 |WS Consumer cannot retrieve downloadable imports
|SE-864 |JSON mapping fails
|===

*_Original May 2014 Release Build Number 3.5.0-201405161032:_*

== Fixed Mule ESB Issues

Note that only those tickets labeled with *MULE* are fixes which apply to both the Enterprise and Community versions of the runtime; tickets labeled with *EE* are fixes which apply only the Enterprise version.

[%header,cols="20a,80a"]
|===
|Issue |Description
|EE-2784 |Cannot serve static content on root domain
|EE-2916 |java.io.NotSerializableException at org.mule.config.spring.parsers.assembly.MapEntryCombiner when having a JDBC Inbound in a clustered environment
|EE-3199 |Starting Mule Standalone EE on Mac OS 10.6 with i7 processor runs with wrapper-macosx-universal-32 instead of 64
|EE-3258 |JDBC transport complains about invalid expression template #[payload]
|EE-3264 |MMC agent not working in Embedded WAR file
|EE-3265 |DeploymentService lock not released under error conditions
|EE-3273 |Remove ReplyToParameterProcessor from internalMessageProcessorNames list
|EE-3314 |Bootstrap script doesn't recognize whether Windows is running in 32 or 64 bits
|EE-3315 |Bootstrap script doesn't recognize Linux running on System z (IBM Mainframe)
|EE-3316 |Bootstrap script doesn't recognize whether the AIX kernel is running in 32 or 64 bits
|EE-3317 |Running the same mule.bat from two terminals shouldn't be possible
|EE-3322 |ClassCastException using inbound file endpoint in cluster
|EE-3322 |ClassCastException using inbound file endpoint in cluster
|EE-3344 |populatem2repo script does not include mmc related jars
|EE-3356 |Supported JDKs are not properly defined
|EE-3370 |HTTP <-> JMS Queue <-> CXF Service bridge failing in 3.4.1 EE, working in 3.4.0 EE
|EE-3394 |Populate M2 Repo does not populate Clover
|EE-3419 |NullPointerException is Thrown when shutting down Mule with the MMC Agent disabled
|EE-3423 |Mule should do clean up of JDBC Driver threads to avoid ClassLoader leaks
|EE-3449 |Incorrect validation for node ID in cluster causes error on removal if node IDs are not reassigned
|EE-3459 |ConcurrentModificationException when getting finished records count or executing instances
|EE-3470 |Queues with limited size behave differently in standalone and cluster mode
|EE-3474 |ObjectStore is not synchronized properly
|EE-3496 |Expensive lookup in Spring Registry is performed every time a MEL expression is evaluated
|EE-3535 |Change MVEL dependency to use mule's MVEL
|EE-3540 |No way to retrieve stack trace for record, input or on-complete exceptions
|EE-3563 |max-failed-records only works on the last step
|EE-3682 |MissingResourceException thrown when gracefully shutting down mule.
|EE-3809 |Upgrade Guava to avoid incompatibilities with latest JDK7
|EE-3847 |String format exception when logging exception in streaming commit
|EE-3859 |Widget example fails to start because does not find mule-app.properties.
|EE-3865 |Widget example script fails to start because of renamed jars
|EE-3903 |WMQ connector doesn't allow the setting of a transportType in the connection factory
|EE-3923 |Mule fails to start when running in legacy mode (Tanuki wrapper license seems invalid)
|EE-3955 |Test cases override DefaultObjectStoreFactoryBean static delegate causing other tests to fail when split and aggregate operations are used.
|MULE-3704 |AttachmentsPropagationTestCase needs XML config file
|MULE-5301 |The MailMessageFactory adds inbound email headers to the outbound scope of the message
|MULE-5685 |Unformatted log line when a property is optional
|MULE-6367 |FTP Inbound endpoint fails when reading empty file
|MULE-6559 |Wrong messages on JDK version validation
|MULE-6560 |Incorrect value in recommended JDK version checking
|MULE-6564 |Using http://cxfconfiguration[cxf:configuration] element prevents generation of WSDL on JAXWS SOAP component
|MULE-6577 |Failure to propagate the correlation ID across JMS queues
|MULE-6630 |Expression component serializes requests
|MULE-6783 |HTTP inbound keep-alive attribute not overriding the keepAlive attribute of HTTP connector
|MULE-6790 |File transport sets the Directory attribute incorrectly
|MULE-6791 |Jetty inbound endpoint configured with useContinuations="true" sets http.method as outbound rather than inbound
|MULE-6800 |Thread leak on Mule redeployments for embedded
|MULE-6808 |When running salesforce operations in parallel (with Oauth integration), in some scenarios we are getting an exception related to the access token for Oauth
|MULE-6816 |Shutdown timeout is not respected
|MULE-6829 |cxf_operation is wrong when using proxy-client of a soap 1.1 request
|MULE-6831 |Applications deleted when deployment fails
|MULE-6833 |GZip transformer failing
|MULE-6837 |Mule application fails when doing stop/start
|MULE-6849 |ReplyToDestination is not properly configured in some scenarios
|MULE-6853 |Sftp does not support files with no extension when using tempDir and useTempFileTimestampSuffix
|MULE-6858 |Filename-wildcard filter to fails with SFTP
|MULE-6863 |File, FTP and SFTP message factories sets outbound properties.
|MULE-6864 |SFTP: Jsch issue in java 1.7 and Kerberos
|MULE-6870 |HTTP Patch body is ignored
|MULE-6871 |DefaultMuleSession got broken between mule 3.2 and 3.3
|MULE-6874 |Memory leak with dynamic endpoints
|MULE-6880 |FTP responseTimeout has no effect
|MULE-6882 |TCP Outbound Endpoint ignores responseTimeout
|MULE-6884 |HTTP/HTTPS Connectors: tcpNoDelay
|MULE-6887 |Duplicating instanceName in quartz connectors cause weird application failures
|MULE-6889 |Concurrent Modification Exception when using the Async Message Processor inside a foreach
|MULE-6917 |set-attachment adds attachments that Mule can't really use
|MULE-6920 |Race condition on startup of Mule Context
|MULE-6944 |Thread leak for asynchronous calls in embedded mode
|MULE-6947 |flow names with slashes (/) break MPs notification paths
|MULE-6959 |Race condition creating MVELExpressionLanguage instances
|MULE-6965 |Error during mule message serialization when using byte array as payload
|MULE-6969 |InputStream not closed on Scriptable
|MULE-6972 |`+<jersey:resources>+` component doesn't register multiple exception mappers
|MULE-6973 |`+<jersey:resources>+` component doesn't register multiple `+<jersey:context-resolver>+`
|MULE-6986 |`+<http:static-resource-handler>+` fails when request path is '/'
|MULE-6989 |Quartz synchronous is not using the configured exception strategy
|MULE-6990 |OOM exception using foreach
|MULE-6991 |postAuth() method does not catch token expiration exception
|MULE-6991 |postAuth() method does not catch token expiration exception
|MULE-6992 |Race condition when refreshing access tokens
|MULE-6992 |Race condition when refreshing access tokens
|MULE-6993 |ClassCast exception when using `+<cxf:proxy-service>+` and validationEnabled, and the request contains a CDATA field.
|MULE-6995 |DynamicOutboundEndpoint does not use the connector's service overrides
|MULE-6997 |Rollback Exception Strategy retries an incorrect number of times
|MULE-6998 |Incorrect maven dependency for drools
|MULE-6999 |File Transport delays the processing of files when pollingFrequency attribute is uncomfortably narrow
|MULE-7004 |Fixed Frequency Scheduler allows negative value on startDelay
|MULE-7005 |ServerNotification completing work after listener failure
|MULE-7008 |Private flow sends duplicate message when replyTo property is set
|MULE-7012 |HTTP/HTTPS outbound endpoints ignore the keep-alive attribute
|MULE-7015 |ObjectToHttpClientMethodRequest fails to process DefaultMessageCollection when http.version is set to 1.0
|MULE-7019 |AccessTokenPool is not closed after disposal
|MULE-7021 |AbstractListeningMessageProcessor needs to implement MessageProcessorContainer To be debuggable
|MULE-7024 |DataSense core doesn't support inbound endpoints
|MULE-7025 |Serialization exception using persistent queues
|MULE-7027 |ExpiringGroupMonitoringThread must process event groups only when the node is primary
|MULE-7028 |MuleMessageToHttpResponse not evaluating outbound scope to set the content type header
|MULE-7028 |MuleMessageToHttpResponse not evaluating outbound scope to set the content type header
|MULE-7034 |MuleEvent is not serializable when using a JDBC inbound endpoint with a nested query
|MULE-7036 |QueuedAsynchronousProcessingStrategy ignores queue store configuration
|MULE-7040 |Request-reply throwing ResponseTimeoutException on Mule shutdown
|MULE-7041 |EventProcessingThread must manage exceptions thrown by implementation classes
|MULE-7042 |Event correlation timeout incorrectly detected on cluster
|MULE-7043 |Cannot put a Foreach after an OAuth authorize
|MULE-7050 |MuleApplicationClassLoader loadClass() method not synchronized
|MULE-7053 |Make DevkitBasedMessageProcessor.process not final
|MULE-7059 |The generated Studio runtime bundle needs to have a different internal structure
|MULE-7062 |It is not possible to send outbound attachments over http
|MULE-7080 |Race condition checking file attributes on SFTP transport
|MULE-7087 |NullSessionHandler - Empty Mule Session header
|MULE-7091 |IllegalStateException when doing OAuth dance with InMemoryObjectStore
|MULE-7092 |DevkitBasedMessageProcessor does not implement MessageProcessor
|MULE-7114 |Outbound HTTP Patch call is not sending the payload as message body
|MULE-7116 |Message receiver fail when trying to schedule work after reconnection
|MULE-7118 |Incompatible usage of MVEL on Drools
|MULE-7119 |MEL DateTime is not serializable
|MULE-7121 |OAuth support throws raw exception when authorization code not found
|MULE-7123 |MuleExceptions are not all Serializable
|MULE-7125 |requireClientAuthentication="true" not working on jetty SSL connector
|MULE-7137 |DefaultMessageProcessor chain needs to decouple from Pipeline
|MULE-7149 |Flow variables should not be propagated to / from other flow invoked with flow-ref
|MULE-7151 |Add new http/s outbound endpoint attribute to enable behavior provided by http.disable.status.code.exception.check property
|MULE-7152 |When using `+<cxf:proxy-service>+` with a wsdl having multiple ports, the proxy only redirects the first one.
|MULE-7153 |JMS Queue <-> CXF Service failing in 3.4.1 EE, working in 3.4.0 EE
|MULE-7156 |QueueProducer should have a variable generic type
|MULE-7165 |Request Body is not closed in the HttpMessageReceiver
|MULE-7189 |CXF Proxy service: When specifying a wsdlLocation of a non .net based SOAP api and requesting the proxy to use only the body of the envelope, the payload gets modified and loses part of it.
|MULE-7193 |gzip-compress-transformer does not work correctly if the input is a string
|MULE-7194 |Improper handling of UnknownHostException in Outbound TCP
|MULE-7198 |Build fails due to error downloading dependencies of jBPM module.
|MULE-7204 |Race condition when compiling MEL expressions
|MULE-7223 |HTTP transport does not trigger exceptions when client closes connection
|MULE-7224 |body-to-parameter-map-transformer only works with GET and POST
|MULE-7228 |Confusing log message in EventProcessingThread
|MULE-7230 |Changes in HttpMuleMessageFactory and AbstractMuleMessageFactory breaks 3.4.x DevKit's generated code
|MULE-7248 |Supported JDKs are not properly defined
|MULE-7260 |Generated DataSense mule config is invalid when there are multiple property placeholders
|MULE-7264 |DevkitSupport module should use apache commons StringUtils instead of Spring
|MULE-7265 |When a flow is not fully started up, some message processors remain started and could not be disposed.
|MULE-7293 |TransientRegistry does not dispose all registered objects on dispose.
|MULE-7297 |NullPointerException when trying to override a class with loader.override
|MULE-7307 |Disallow multiple transaction manager to be used within an application
|MULE-7311 |Lack of synchronization causes multiple expiration requests on Aggregator groups
|MULE-7312 |Upgrade Guava to avoid incompatibilities with latest JDK7
|MULE-7322 |MuleApplicationContext renamed to MuleArtifactContext breaks backwards compatibility
|MULE-7329 |Number of JMS consumers decreases to 1 after reconnection
|MULE-7331 |JMS inbound do not reconnect to queue after broker restart
|MULE-7335 |Transformer resolution in TypeBasedTransformerResolver fails depending on which order transformers are found
|MULE-7366 |Mule logs switch to DEBUG level when application uses the Salesforce Connector
|MULE-7373 |DevKit intercepting message processors fail if they are the last element of a chain
|MULE-7373 |DevKit intercepting message processors fail if they are the last element of a chain
|MULE-7376 |NullPointerException while initializing body
|MULE-7376 |NullPointerException while initializing body
|MULE-7382 |RefreshTokenManager's ObjectStore is not expiring entries
|MULE-7382 |RefreshTokenManager's ObjectStore is not expiring entries
|MULE-7390 |XSLT transformer is vulnerable to XXE
|MULE-7399 |Flows can start processing messages before referenced flows are completely started
|MULE-7400 |Deployment service is not locked when started
|MULE-7408 |StageName generation should be decoupled from Flow
|MULE-7411 |SXC filter router fails due to uninitialized transformer
|MULE-7417 |Log4j config watch dog thread is not being stopped when undeploying applications
|MULE-7419 |Session is lost when a message is returned by a JMS request-response outbound-endpoint
|MULE-7425 |xpath function should not have any side effects on the message
|MULE-7431 |AbstractMessagingExceptionStrategy accessing an incorrect Even when using RequestContext
|MULE-7459 |Echo example mvn build fails because of test error.
|MULE-7463 |Monitored ObjectStores should behave consistently
|MULE-7465 |XPATH Expression Language - Dom4J creates separate text-nodes
|MULE-7489 |AbstractRegistryBroker.lookupObjects() throws NPE when registries are added/removed concurrently.
|MULE-7491 |JDBC reconnect policy is not working when setting blocking=true
|MULE-7504 |Applications sharing connectors mix endpoint MBeans
|MULE-7509 |Transactional Queue Recovery fails when recovery queue has transient queue config.
|MULE-7512 |Synchronous until-successful waits in milliseconds instead of seconds
|MULE-7429 |Fix UntilSuccessfulWithQueuePersistenceObjectStoreTestCase recoversFromPersistedQueue test
|MULE-7494 |Test cases override DefaultObjectStoreFactoryBean static delegate causing other tests to fail when split and aggregate operations are used.
|MULE-7287 |CXF: MustUnderstand header must not be considered by the proxy-service
|MULE-7358 |org.mule.config.bootstrap.SimpleRegistryBootstrap.registerTransactionFactories can't handle optional factories
|MULE-7558 |Fix failing test CxfSoapJmsTestCase due to MULE-7546
|MULE-7552 |Transaction isRollbackOnly() should considered already finished transactions
|MULE-7548 |Lifecycle does not start a QueueManager in the right order
|MULE-7542 |Response MuleEvent/MuleMessage do not need to be copied in AbstractMessageDispatcher.process()
|MULE-7538 |Application fails to start when having 16 or more connectors with asynch reconnection that fail to connect
|MULE-7535 |Remove OutboundRewriteResponseEventMessageProcessor
|MULE-7534 |JMS connector doesn't reconnect to ActiveMQ broker 5.6 when using blocking=true
|MULE-7533 |Eliminate unnecessary copying of inbound message properties
|MULE-7532 |Cleanup org.mule.el.* code warning and add JavaDoc
|MULE-7524 |Encoded characters not working when using expressions for dynamic endpoints
|MULE-7521 |The DevKit oAuth module should log the body contents even after a failure
|MULE-7520 |Avoid writing app log entries in container log file when not using an specific log4j config file for the app.
|MULE-7518 |Parameterized query broken when CDATA is preceded by a new line
|MULE-7515 |Big HTTP Header is impacting HTTP transport performance
|MULE-7510 |MEL behavior is not consistent between maps and POJOs for proeprty access
|MULE-7258 |Request reply does not work when using specific connector
|EE-3969 |MEL behavior is not consistent between maps and POJOs for proeprty access
|EE-3780 |Reduce HA Verbosity when a node goes down
|MULE-7577 |OAuth regression - RC1 OAuth connectors not working at all
|MULE-7572 |CopyOnWriteCaseInsensitiveMap should fully implement Map
|MULE-7571 |Persistent queue logs and data remove after shutdown
|MULE-7569 |CopyOnWriteCaseInsensitiveMap implementation leaks changes to original map
|MULE-7122 |Fix flaky test LoanBrokerSyncTestCase
|===

== Fixed EE Issues

[%header,cols="20a,80a"]
|===
|Issue |Description
|EE-2860 |Be able to configure / define all necessary ports to create and use a Hazelcast cluster
|EE-2938 |Please upgrade Tanuki Service Wrapper to version 3.5.16 or later
|EE-3274 |Add JDBC support on multi-transaction
|MULE-6916 |Update Saxon version to 9.1.0.8. See xref:junittestfailnote[JUnit tests fail note].
|EE-3327 |Add property to disable MMC agent to wrapper.conf
|EE-3328 |Provide a way to disable throttling
|EE-3372 |Implement Batch Module
|EE-3440 |Batch module management API
|EE-3458 |Improve Plugin Lifecycle
|EE-3509 |Make cache component use SHA-256 instead of MD5 as event keying function
|EE-3659 |Update WMQ transport to support session pooling
|EE-3877 |HA: Include flag for configuring reliable vs performant flag for HA cluster
|EE-3925 |Upgrade to Hazelcast version 3.1.6
|EE-3930 |Include mule.mmc.bind.port as commented out attribute in wrapper.conf
|MULE-6172 |Upgrade apache-commons-pool
|MULE-6788 |Upgrade CXF to 2.5.9
|MULE-6794 |CXF WS-Security - SecurityContext is not set after successful authentication
|MULE-6796 |Allow MEL expressions in `+<cxf:property>+` of `+<cxf:ws-config>+`
|MULE-6809 |When using a persisten object store keys that are not valid file names fail
|MULE-6825 |Make loggin less verbose in CompositeApplicationClassLoader
|MULE-6843 |Move OAuth from DevKit to ESB
|MULE-6844 |Connector Auto-Paging
|MULE-6845 |Define Polling Watermarks
|MULE-6862 |HttpMuleMessageFactory should support multipart/form-data
|MULE-6872 |Poll 2.0
|MULE-6913 |Add a way to invalidate the content of a caching strategy
|MULE-6958 |Have HTTP attachments available out of the box
|MULE-6968 |Http endpoint with path="" or path="/" do not attend requests at root level
|MULE-6970 |Add json schema support to the json schema validation filter
|MULE-6982 |Upgrade jsch to version 0.1.50
|MULE-6988 |The jetty transport does not have an option to configure the number of acceptor threads
|MULE-7010 |Provide a way to clear object stores content's without disposing it
|MULE-7011 |Provide a mechanism to discard all elements in a queue
|MULE-7013 |Deprecate keepSendSocketOpen attribute in HTTP connector
|MULE-7016 |Make RefreshTokenManager lazy on ObjectStoreManager
|MULE-7023 |Rename keep-alive attribute in HTTP/HTTPS endpoints
|MULE-7031 |Add getObjectStoreManager() in MuleContext
|MULE-7052 |Create bitronix transaction manager module and integrate with existent transports
|MULE-7063 |Add Spring Security LDAP to Mule Distribution
|MULE-7077 |Change Spring security manager to be created in standalone mode
|MULE-7090 |Make Mule rely on platform configured JCE provider instead of fixing on a predefined version
|MULE-7097 |Provide a way to specify valid cipher specs for SSL on transports that support the protocol
|MULE-7103 |Add support for specifying as a system property, FIPS compliant security model
|MULE-7107 |Improve FunctionalTestCase to support several configuration files loaded from an Array.
|MULE-7108 |Need to decouple Pipeline interface from MessageProcessorPath generation
|MULE-7109 |Allow each until-successful processor to have its own threading profile
|MULE-7110 |Improve jms transport to support reconnection at the endpoint level
|MULE-7128 |Need to support short lived queues
|MULE-7139 |As an user I want to be able to share resources such as connector between mule applications
|MULE-7144 |Differentiate TCP connection timeout from responseTimeout
|MULE-7148 |Differentiate HTTP connection timeout from responseTimeout
|MULE-7155 |Add appending support to the SFTP transport
|MULE-7169 |Add JMS session pooling support
|MULE-7181 |Need a way to extend InboundEndpointFactoryBean and OutboundEndpointFactoryBean
|MULE-7191 |DefaultMuleMessage should instantiate transient fields when deserealized
|MULE-7196 |Integrate the current Web Services Component to Mule
|MULE-7207 |Create Scatter-Gather component for parallel multicasting
|MULE-7213 |MVEL Version upgrade
|MULE-7215 |Database connector
|MULE-7218 |Get SOAP action working correctly
|MULE-7220 |Use an expression for the service address
|MULE-7221 |Should be able to add custom soap headers
|MULE-7222 |An exception to be thrown when a SOAPFault is returned
|MULE-7240 |Web Services Consumer
|MULE-7252 |Restart applications automatically even after failure
|MULE-7268 |Support GZIP compression when proxying
|MULE-7271 |SpringXmlConfigurationMuleArtifactFactory uses persistent Queues
|MULE-7279 |Add support for local stores in cluster mode
|MULE-7321 |Deprecate <all> in favor of <scatter-gather>
|MULE-7336 |Avoid transformer lookup inside registry to improve performance
|MULE-7337 |FtpMessageRequester should allow you to retrieve files using the complete path
|MULE-7362 |Allow MEL expressions to safely access nested null properties
|MULE-7396 |Cache and provide the StreamCloser through the MuleContext
|MULE-7401 |Include the security model used at mule container startup console
|MULE-7409 |DefaultMuleArtifact needs the toString method so that better information can be provided in Studio
|MULE-7414 |Use MVEL Dynamic Optimizer to evaluate MEL Expressions
|MULE-7427 |Make Jetty and Servlet transports message props consistent with Http transport
|MULE-7428 |Fix VM underlaying implementation
|MULE-7439 |Replace StringBuffer with StringBuilder whenever possible
|MULE-7447 |DataSense Artifact Factory should support MES security property placeholders and bean property placeholder
|MULE-7448 |Logger - Avoid evaluating expressions when not logging the result
|MULE-7458 |Make the pgp module work on a FIPS environment
|MULE-7464 |Runtime Message Processor Injection
|MULE-7481 |Add extension point in MuleLockFactory
|MULE-7503 |Refactoring to allow splash screen customization
|MULE-7507 |Set wrapper.ignore_sequence_gaps=TRUE in wrapper.conf
|MULE-7545 |Refactor AbstractConnector to allow for connectors that don't use default dispatcher pool
|MULE-7546 |Minimize cost of copying MuleMessage and it's properties for 3.5
|MULE-7547 |Minimize cost of copying MuleEvent and it's flow variables for Mule 3.5
|MULE-7551 |Switch Safehaus JUG UUID implementation out for eaio.uuid.UUID to reduce contention
|MULE-7553 |Make MVEL ReflectiveOptimizer default again.
|===

== Anypoint Studio Fixed Issues

[%header,cols="20a,80a"]
|===
|Issue |Description
|STUDIO-10 |Changing the name in documentation for a choice node does not change the label in the flow.
|STUDIO-981 |REST widget dialog box shouldn't offer support for interceptors since they don't work
|STUDIO-1053 |Twilio connector - Can't deploy to Mule iON (ERROR ...NotWritablePropertyException)
|STUDIO-1084 |The line location is not displayed anymore for the errors in the problems pane
|STUDIO-1125 |Remove one of the error messages in the error view
|STUDIO-1944 |Choice doesn't have display name
|STUDIO-2304 |Convert Java Project to Mule Studio Project
|STUDIO-2349 |MuleStudio refuses to save project after completing mapping and save mapping button disappears
|STUDIO-2539 |Support for <connection-pooling-profile> in Cloud Connectors config elements
|STUDIO-2750 |Deleting an .mflow file causes an error to be shown in the Error Log view
|STUDIO-2761 |http connector adds optional attributes by default
|STUDIO-2934 |Misspelled word when errors are encountered when executing a mapping
|STUDIO-2973 |Remove Clover ETL import functionality
|STUDIO-2974 |Basic Tutorial (Spellchecker) does not delete file from InXML folder
|STUDIO-3008 |CustomEvent templates defined in XML lead to issues when switching to graphical view
|STUDIO-3070 |JUNIT 4.0 TestCase does not work with flow on DataMapper
|STUDIO-3105 |Deleting Output argument does not delete dictionary entry
|STUDIO-3224 |Message Processor config-ref showing error when using MEL
|STUDIO-3271 |DataMapper wizard throws NPE when DataSense required params are not configured
|STUDIO-3307 |No maven installation was found at the specified location
|STUDIO-3380 |Need a way to follow flow refs on canvas
|STUDIO-3397 |Test Flows
|STUDIO-3398 |Database lookup table JDBC configure should support spring property placeholders
|STUDIO-3455 |Native query language types need to be sorted
|STUDIO-3469 |DM is throwing NPE:s when called from a flowref in a foreach
|STUDIO-3598 |Runtime cannot load reference library
|STUDIO-3750 |Changes in HTTP/HTTPS connector and endpoint properties
|STUDIO-3758 |Studio will delete XML files incorrect
|STUDIO-3800 |Service name should allow letters numbers dash and space
|STUDIO-3905 |Import \ Export: when having a file in src/main/resources and importing the project the bin folder it's shown in the package explorer
|STUDIO-3921 |Message Properties Transformer values and scope lost in two-way editing
|STUDIO-3927 |Importing a pom project with either 3.4.1 or CH runtime, always imports 3.4.1 RE.
|STUDIO-3933 |Import 3.4.1 Project with 3.4.0 ESB runtime
|STUDIO-3937 |Add new Studio 3.5 plugin to Eclipse marketplace
|STUDIO-4003 |Two way editing :: All & Choice description in documentation is lost in XML
|STUDIO-4013 |DataSense deadlock when losing focus
|STUDIO-4029 |DataMapper hangs when processing SAP XSD for XML version 1
|STUDIO-4032 |AlternativeTo doesn't work inside radioBoolean
|STUDIO-4105 |import-export :: properties file saved in class folder
|STUDIO-4180 |DataMapper is reading DateTime XSD types as Date
|STUDIO-4204 |Communicate what object the user is retrieving for DataSense
|STUDIO-4239 |Studio adds .studio, flows, mappings, and src/main/app to non-mule projects
|STUDIO-4243 |Anypoint Studio: Design new splash screen
|STUDIO-4245 |Support for new scatter-gather component
|STUDIO-4285 |DB: Create Execute DDL Editor
|STUDIO-4286 |DB: Create Bulk Update Editor
|STUDIO-4303 |DB: Add Metadata support for Execute DDL
|STUDIO-4304 |DB: Add Metadata support for Bulk Update
|STUDIO-4341 |Request-reply: add Context Sensitive Help
|STUDIO-4357 |Metadata display tool :: add Variable Record
|STUDIO-4387 |Create Use Case Application: Database to CSV
|STUDIO-4394 |Error message when using DataMapper with Mule CE runtime shows incorrect statement
|STUDIO-4396 |New Database: when opening the MySql editor, none of the radio buttons it's selected
|STUDIO-4439 |Web Service consumer :: Context Sensitive Help :: Topic not found
|STUDIO-4447 |Several NullPointerException when using DataSense Query Builder
|STUDIO-4457 |New Database: add context sensitive help
|STUDIO-4467 |Allow to export XML templates (metadata) from the Studio SAP editor
|STUDIO-4490 |DataSense doesn't work properly with SFDC and CSV format
|STUDIO-4513 |Fix HL7 connector for new Studio API
|STUDIO-4520 |Maven can't find Maven installation
|STUDIO-4531 |Batch: autocompletion for scheduling-strategy is not listing ROUND-ROBIN option
|STUDIO-4536 |Maven apps run with the JAVA_HOME runtime instead of the project's
|STUDIO-4543 |Rename "Documentation" Tab to "Notes"
|STUDIO-4550 |Deprecate All Router
|STUDIO-4614 |SAP connector :: widget is disposed error in the log
|STUDIO-4620 |Import: problem when importing project from external location
|STUDIO-4627 |Trying to create a mapping file manually in Studio generates an error
|STUDIO-4628 |DataSense Type Grouping :: New MetadaCategory feature is not working properly with query.
|STUDIO-4633 |Query builder: The operator combobox resets each time the field combobox changes in the filter
|STUDIO-4634 |UI loses Config Reference of a connector's operation in certain context
|STUDIO-4635 |Fail to deploy application with spaces in the name
|STUDIO-4637 |Some metadata is not available inside Batch commit
|STUDIO-4643 |Saved changes in Expression Component get lost when closing the mflow
|STUDIO-4648 |New Database: when opening the Generic global config editor, none of the radio buttons it's selected
|STUDIO-4650 |Operation list should be alpha sorted in WS Consumer
|STUDIO-4653 |DataSense and Test Connectivity: Improve error handling when there is no exception to show.
|STUDIO-4661 |Problem with XML generation when having multiple instances of the `+<spring:beans>+` tag
|STUDIO-4662 |Datasense : MEL dot notation is not supported in enricher metadata
|STUDIO-4663 |As a mule developer, I want to edit and save mapping changes for default mappings
|STUDIO-4664 |New Database: Create table for advanced parameters in mysql config and generic config
|STUDIO-4666 |Add 'Refresh DataSense' button to editors
|STUDIO-4668 |Add APIKit UpdateSite URL (beta) to the list of Studio Update Sites
|STUDIO-4670 |SAP Object Name not being saved
|STUDIO-4671 |Horizontal elements not saving or restoring the values of the child elements
|STUDIO-4676 |Capitalize "Transactional *A*ction:" in DB Advanced tab
|STUDIO-4678 |Import project :: there isn't feedback when importing a project and it fails
|STUDIO-4679 |DataMapper Decimal Pression being configurable
|STUDIO-4680 |Import maven project using pom.xml import option does not have the "Copy to workspace" option
|STUDIO-4682 |DataSense is retrieve though the connector-ref element has useDatasense unselected
|STUDIO-4683 |Metadata propagation doesn't work when type chooser is inside horizontal
|STUDIO-4684 |Value of managed/custom Objecto Store TID gets lost in 2-way editing
|STUDIO-4685 |Loading referenced grammars". java.lang.NullPointerException
|STUDIO-4687 |Exporting a project generates a deploy in the apps directory
|STUDIO-4690 |Prototype new DataSense experience
|STUDIO-4692 |Propagate metadata for record vars
|STUDIO-4694 |Add aggregation strategies to global elements
|STUDIO-4695 |Debugger support for record variables
|STUDIO-4702 |Can't clear application data when application uses maven
|STUDIO-4703 |Improve Studio Analytics (KissMetrics) reports to include Studio version and OS
|STUDIO-4704 |Undo of the removal of the only element of a flow does not work
|STUDIO-4705 |New DB connector does not work with data sense and datamapper
|STUDIO-4706 |DB: Add fetchSize attribute to select and stored-procedure operations.
|STUDIO-4709 |DataSense classloader should always include src/main/app/lib as native library path
|STUDIO-4714 |Add environment variable to the Studio execution in Ubuntu to avoid Eclipse bug
|STUDIO-4717 |New Database: Set bulkMode=true as default for database operations
|STUDIO-4718 |Make DataSense combo-boxes searchable
|STUDIO-4720 |Create icon for DataSense explorer
|STUDIO-4724 |Studio should not allow me to insert a Message Processor before an input source
|STUDIO-4726 |Run Applications with Maven is not clearing the previous excecution of a different app causing multiple runs
|STUDIO-4727 |DataMapper: Typo in "Generate Default" Popup Window
|STUDIO-4731 |New Database: Studio work for MULE-7430
|STUDIO-4733 |DB: Change loginTimeout attribute to connectionTimeout
|STUDIO-4735 |Studio DataSense and Test Connection Does not work with premium connectors due to @RequiresEnterpriseLicense
|STUDIO-4740 |Set category to Connectors for HL7
|STUDIO-4741 |Deprecate filter-expression in batch step
|STUDIO-4744 |DataSense does not work when the project is maven based
|STUDIO-4745 |Add preference for deprecated message processors
|STUDIO-4746 |Import/Export improvements
|STUDIO-4750 |DSQL Query Builder removes fields from a defined query when using it's filter
|STUDIO-4751 |Improve Deploy to Cloudhub properties table
|STUDIO-4753 |DB: Make query editor bigger so that multiple line queries are more readable
|STUDIO-4754 |DataSense and Test connectivity fail with error java.lang.IncompatibleClassChangeError
|STUDIO-4755 |Maven support validation fails randomly after Studio started
|STUDIO-4759 |Can't manually fire a Poll execution
|STUDIO-4765 |SAP Export template not working for inbound-endpoints
|STUDIO-4767 |New Database: Implement Studio side of bulk-update renaming (MULE-7446)
|STUDIO-4771 |Scatter gather :: Metadata is not showed when selected an element inside SG
|STUDIO-4772 |DB: View grows each time an operation is selected
|STUDIO-4776 |Cannot open workflow or create a new one
|STUDIO-4777 |Delete the popup warning of the maven installation not being found and replace it for an option to configure maven when creating a new mule project
|STUDIO-4779 |WSC :: NPE when invalid WSDL location
|STUDIO-4780 |DataMapper :: Unexpected exception while trying to create mapping
|STUDIO-4782 |DataMapper Can not open a config-ref that is not present on same config
|STUDIO-4783 |Scatter gather :: Metadata is not showed when selected an element after closing Mflow
|STUDIO-4784 |Deprecation of Service Lookup functionality
|STUDIO-4785 |DataMapper :: Cdata check is not saved
|STUDIO-4786 |Studio Mflow editor :: Could not open the editor
|STUDIO-4787 |Support for all property placeholders (secure, spring bean) for DataSense
|STUDIO-4788 |SAP IB endpoint :: XML definition tab
|STUDIO-4790 |DB: add streaming attribute to stored-procedure operation.
|STUDIO-4791 |Flow-ref name cannot be set when there's a single flow in the app
|STUDIO-4792 |DataMapper :: After changing something in the datamapper, the grf file is not being automatically refreshed
|STUDIO-4794 |DataSense Type Grouping :: New MetadaCategory feature is not working properly with query and overlapped keys and categories
|STUDIO-4795 |DataMapper :: Out of memory error
|STUDIO-4796 |When an application is running and another application is saved it gets deployed.
|STUDIO-4798 |Capitalize error message in Web Services Consumer
|STUDIO-4799 |Cannot start applications in embedded runtime under Windows XP 32bits
|STUDIO-4801 |Maven installation detection not working
|STUDIO-4805 |Jetty transport does not support host,port and path
|STUDIO-4806 |Scatter-Gather UI and two-way editor issues
|STUDIO-4810 |Combo boxes in Studio don't handle duplicates labels
|STUDIO-4811 |UI not recognizing SFDC config reference when the file that contains the config is closed
|STUDIO-4812 |NoSuchMethodError when manually running a Poll in Debug mode
|STUDIO-4813 |Deploy to CloudHub validates wrongly December 2013 runtime
|STUDIO-4817 |WebServiceConsumer cannot create metadata with types which import schemas with relative paths
|STUDIO-4818 |DataSense deadlock when configuring global element first
|STUDIO-4823 |Logger: Set default value to #payload
|STUDIO-4824 |NPE: Refresh DataSense button in editors
|STUDIO-4827 |New Database: Rename `+<db:properties>+` to `+<db:connection-properties>+`
|STUDIO-4830 |Import project fails when source location does not have the flows folder created
|STUDIO-4832 |Cloudhub :: NPE when changing project to deploy
|STUDIO-4833 |Salesforce: No DS call after using Query Builder
|STUDIO-4834 |Rename connectors update site to be Anypoint Connectors
|STUDIO-4836 |Show input and output payloads in DataSense explorer
|STUDIO-4837 |Update DM MEL functions to be null safe
|STUDIO-4838 |Resize Export to cloud hub window
|STUDIO-4839 |On metadata retrieval failure, give users options
|STUDIO-4841 |Choice: when changing the display name, the default section disappears
|STUDIO-4842 |DataSense explorer should support record variables
|STUDIO-4844 |When creating JSON input List<String> from JSON sample, element in DM script renamed as "array"
|STUDIO-4846 |New Database connector - From studio: Test connection works. When run, class not found exception
|STUDIO-4848 |Some examples have the _MACOSX folder in the zipfile
|STUDIO-4850 |When XML is not well formed, autocompletion doesn't work
|STUDIO-4852 |Remove auto folding of namespaces in xml editor
|STUDIO-4853 |Merge DataMapper as part of the Studio Core Components feature
|STUDIO-4854 |Auto complete in the when use MEL for #message.inboundAttachments.size() does not reveal the size() method
|STUDIO-4855 |Improve Studio's proposals when trying to run a second application
|STUDIO-4856 |Drag and Drop: I cannot drop Message Processors from the canvas in the Default section of a Choice
|STUDIO-4858 |Capitalize "Java(S)cript" Transformer
|STUDIO-4859 |Add space to the "Object to JMS( )Message" Transformer
|STUDIO-4861 |Capitalize "Custom Business (E)vent"
|STUDIO-4862 |Delete spellchecker related files from product distribution
|STUDIO-4864 |Maven: implement the removal of dependencies in the pom file
|STUDIO-4865 |DataMapper Should User Simple-Copy
|STUDIO-4866 |Query builder :: NPE when using a query with invalid types
|STUDIO-4867 |Mule project is null in the StudioDesignContext when validating config
|STUDIO-4868 |WSC :: NPE operation validation in WSC is not NULL safe
|STUDIO-4869 |NPE when Right clicking in the canvas
|STUDIO-4870 |Release the `+<studio:studio>+` plugin
|STUDIO-4871 |Improve Message displayed when trying to run a second application
|STUDIO-4872 |DataMapper fails executing the specified mapping
|STUDIO-4873 |Resource choosers completed from property tab display absolute path in xml
|STUDIO-4874 |Change text of DM warning for Community Runtime
|STUDIO-4876 |CE runtime:: When attempting to run a project with DM, the app seems to run
|STUDIO-4877 |DataMapper :: Flow properties editor is broken
|STUDIO-4878 |WSC :: Error while resolving metadata
|STUDIO-4879 |Incorrect label for FTP fileAge attribute
|STUDIO-4880 |DataMapper :: NPE when doing Mapping in CE runtime
|STUDIO-4881 |Migrate the 3.5 CE runtime to master branch + fix sourcePath
|STUDIO-4882 |WSC :: Error While resolving Metadata :: RetrieveWsdlMetadataRunnable
|STUDIO-4883 |Typo: "Ag(g)regation" in Scatter Gather dialog
|STUDIO-4884 |Add Metadata Key Id to the Native query editor
|STUDIO-4885 |Add mtomEnabled support for WS Consumer
|STUDIO-4886 |NPE Loading referenced Grammars
|STUDIO-4887 |Add Metadata Keys IDs to the Query Builder type chooser list
|STUDIO-4888 |SAP Advanced editor
|STUDIO-4890 |Upgrade SAP Connector for Mule 3.4.x and 3.3.x to version 2.1.2
|STUDIO-4893 |Change DevKit Update site name to "Anypoint DevKit Update Site"
|STUDIO-4895 |Batch: Inconsistency between XML and UI when dropping a batch execute
|STUDIO-4896 |Re validate Use Cases created for Dolomite
|STUDIO-4897 |Usability DataSense Canceling a Retrive DataSense types operation triggers new retrievals
|STUDIO-4898 |Auto-completion escapes property access when not needed
|STUDIO-4899 |DM Input output ReStyling
|STUDIO-4900 |Support MULE-7513: until-successful millisBetweenRetries attribute
|STUDIO-4903 |SAP New Editor :: Details button :: Argument cannot be null error
|STUDIO-4906 |SAP new editor :: Improve message when using BAPI functions and trying to get details from Idoc object and vice versa
|STUDIO-4907 |Web Service Consumer unable to unmarshall response XML
|STUDIO-4908 |Debugger: Changing value of a a flowVar changes the name
|STUDIO-4909 |DM Write Null Values Option is not present in XML
|STUDIO-4910 |Static metadata for Google Connectors is not working
|STUDIO-4912 |Remove statementFactory-ref attribute from DB connector
|STUDIO-4915 |DMCSV to POJO Mapping is failing even the mapping is ok
|STUDIO-4919 |Database: problem with retrieving metadata
|STUDIO-4922 |Mel autocompletion should avoid adding quotes when identifiers have valid characters
|STUDIO-4923 |DataMapper: Swap out edit icon
|STUDIO-4925 |Cloudhub deployment message with server hardcoded
|STUDIO-4926 |Two-way editing Groovy Component: fail to update XML from UI
|STUDIO-4927 |Flow Ref with cycle reference throws stack overflow
|STUDIO-4929 |New Database: In Generic config, Edit bean button doesn't work
|STUDIO-4931 |Update New Studio Welcome Screen
|STUDIO-4932 |ClastCastException with CLabel when using Choice and CXF
|STUDIO-4934 |New Database: wrong editor is opened from template query reference
|STUDIO-4935 |Salesforce DSQL and Native Query text boxes are too small and do not resize properly
|STUDIO-4938 |Import :: when importing a project the flow name and doc name are marked as error
|STUDIO-4940 |Update Studio documentation for Scatter Gather, New Database, WSConsumer and Request Reply
|STUDIO-4942 |Autocompletion: problem when filtering
|STUDIO-4943 |Autocompletion filtering not working
|STUDIO-4945 |Request-reply: link in the documentation help should be opened in a new Web Explorer window as the rest of the message processors
|STUDIO-4946 |BUILD Fix Embedded Mule 3.5.0.EE Server
|STUDIO-4948 |Button for editing Salesforce config reference doesn't work
|STUDIO-4949 |Query Editor doesn't wrap text correctly
|STUDIO-4952 |Post deprecated example zip file publicly
|STUDIO-4953 |Code in Service Orchestration and Choice Routing example still refers to JDBC connector
|STUDIO-4954 |Studio cannot find java class in Foreach Processing and Choice Routing example
|STUDIO-4955 |NullPointerException in metadata propagation inside batch
|STUDIO-4956 |Studio throws error in XML-Only SOAP Web Service example
|STUDIO-4959 |DataMapper :: preview error
|STUDIO-4962 |DataMapper :: Error and closing unexpectedly when doing manual mapping
|STUDIO-4965 |NPE when creating CE Template Projects
|STUDIO-4966 |Problem when opening CE editors
|STUDIO-4969 |Release SAP connector 2.2.x and add it to the Studio release
|STUDIO-4970 |Invalid validation message in SAP component (For 3.4.x runtimes)
|STUDIO-4972 |Change APIkit update site URL before Everest final binaries
|STUDIO-4973 |Studio doesn't show added properties
|STUDIO-4984 |Release all involved maven artifacts in the Studio build
|STUDIO-4985 |Debugger: NPE when running debugging an application that uses AES
|STUDIO-4987 |scripting transformer with properties breaks two-way editing
|STUDIO-4990 |Problem with WSC example project :: WSDL location not correctly set
|STUDIO-4993 |Scripting component is not removing CDATA when changing script type
|STUDIO-4995 |Welcome screen :: Windows 64 bits :: PNG image is lost
|STUDIO-4996 |Editing some properties in a table hangs Studio
|STUDIO-4998 |Lighten color of disabled "Refresh Metadata" in DataSense Explorer
|STUDIO-5007 |Maven :: MAVEN_OPTS is not taken into account when 'running Mule application with Maven'
|STUDIO-5020 |WSC :: MetaDataGenerationException :: createMetaData(RetrieveWsdlMetadataRunnable)
|===

== SAP Connector Fixed Issues

[%header,cols="20a,80a"]
|===
|Issue |Description
|SAPCONN-83 |Full feature Studio Editor
|SAPCONN-164 |Dynamic support for jcoLang attribute
|SAPCONN-168 |Application restart during hot-deployment causes memory access fault on native SAP jco libs
|SAPCONN-169 |When type is iDoc, default rfcType should be tRfc
|SAPCONN-177 |SAP connector should generate less information in the metadata XSD
|SAPCONN-178 |Generate better datasense messages when there is a failure
|SAPCONN-181 |Receiver not failing when there is a object store exception
|SAPCONN-182 |Inbound Endpoint not working in some Mule Cluster configurations
|SAPCONN-183 |Potential file descriptor leak when executing datasense methods
|SAPCONN-184 |XML parsers problems with IDocs or BAPIs with slash (/) character in name
|SAPCONN-185 |JCO library generates classloader leaks
|SAPCONN-186 |Offer BAPI search and IDOC search methods at connector level
|SAPCONN-187 |Metadata generators should encode XML attributes names
|===

== DevKit Fixed Issues

[%header,cols="20a,80a"]
|===
|Issue |Description
|DEVKIT-238 |When injecting params in processors, the doc remains mandatory
|DEVKIT-239 |RestCall does not work with @Connector
|DEVKIT-243 |All parameters in @Connect method are optional, with or without the @Optional annotation.
|DEVKIT-246 |Removed invalid search operation link from the generated technical reference
|DEVKIT-384 |Using @ConnectionKey on a method of the @Connector throws an Exception
|DEVKIT-460 |ManagedConnectionProcessInterceptor just looks for the first annotated @ConnectionKey parameter in the @Connect
|DEVKIT-485 |Update/fix/cleanup archetypes for 3.5.0
|DEVKIT-509 |NotificationGatherer always breaks compilation when using info/warn
|DEVKIT-521 |The message showed when deploying a 3.5.0 app in a 3.4.2 is not friendly
|DEVKIT-522 |DevKit fails with a NullPointerException when a @Connect is added to a method with no @ConnectionKey at any param
|DEVKIT-525 |& 587 Repeated operations (annotated with @Processor, @Filter, @Source, @Transformer, @TransformerResolver) are now forbidden, as all of them will collide in the XSD.
|DEVKIT-549 |Generated ConnectionKey equals method does is not properly implemented
|DEVKIT-554 |No error is shown when the connector has an operation with a param annotated with @Query and doesn't implements metadata related methods.
|DEVKIT-559 |Paginated query won't reconnect on handled exception scenario
|DEVKIT-569 |Connection with basic authentication does not work if the properties are defined in the connector
|DEVKIT-572 |JavaDocs with tabs breaks compilation
|DEVKIT-592 |New project with "test" as connector's name won't build
|DEVKIT-607 |@RestCall - Required dependencies are not included in DevKit parent
|DEVKIT-609 |ProviderAwarePagingDelegate - Add verifier to check that methods that return this are annotated with @Paged
|DEVKIT-613 |Fixed problem with @RestCall and OAuth2
|DEVKIT-632 |NullPointerException is thrown with a number of message processors that take filters as an optional argument
|===

=== MMC Fixed Issues

[%header,cols="20a,80a"]
|===
|Issue |Description
|MMC-1325 |Cluster: Applications deployed to cluster using server group are not displayed in the Cluster Application status portlet
|MMC-1347 |Application not deployed automatically when server added to group from Details
|MMC-1365 |Applications not showing up under server when 2 nodes are cluster
|MMC-1503 |Enhance apply changes to deployments so that it does not affect all nodes
|MMC-1562 |Favorite flows are not shown
|MMC-1599 |Allow Flow Analyzer to be configured to stop automatically after a certain amount of time
|MMC-1643 |User with only monitor rights can't monitor anything if there's a cluster defined
|MMC-1671 |See complete list of flows being analyzed
|MMC-1692 |Add clean up script for Audit log
|MMC-1698 |Error when upgrading if Monitors group was previously removed
|MMC-1701 |New MMC bundle with pre-packed mule standalone and MMC on tomcat
|MMC-1702 |Allow Flow Analyzer to select single node in HA Clustered instance
|MMC-1758 |MMC switches tabs when selecting the log folder
|MMC-1759 |Flow activity charts are not updating
|MMC-1760 |Flows List Order is Not Preserved on Refresh
|MMC-1761 |${serverName} not working in a mail subject of the alert
|===

== Migration Guide

This section presents configuration considerations you may want to adjust when migrating from a previous version of a Mule runtime, or previous version of Studio. https://www.mulesoft.com/support-and-services/mule-esb-support-license-subscription[Contact MuleSoft Support] if you have a question about a specific migration activity or concern.

////
DOCS-1560 Note
////

[[junittestfailnote]]
=== JUnit Tests Fail Note

These release notes show that the Saxon library was updated to 9.1.0.8 in MULE-6916. However a new JUnit rule was introduced that forced JUnit to use the Xalan transformer instead of Saxon. This breaks JUnit tests that were working before.

As part of Saxon upgrade MULE-6916, a system property was added to the `tck` framework:

`org.mule.tck.junit4.rule.ForceXalanTransformerFactory`

This set a property that has the key expected by the `javax.xml.transform` discovery mechanism (as an alternative for the lib endorsed folder) and allows you to set this in your FunctionalTestCase. This forces your application to use Xalan's implementation.

As a workaround, add the following class field declaration to your FunctionalTestCase:

[source,java,linenums]
----
@Rule
public SystemProperty useXalan = new ForceXalanTransformerFactory();
----

This workaround also works with Maven because it is at the JUnit level no matter how the classpath is defined. This occurs because this property sets the right implementation that we expect to get used.


=== Migrating to May 2014 Version

*With Anypoint Studio*: To migrate from *any previous installation of Anypoint Studio*, download and install the May 2014 Enterprise version afresh from http://www.mulesoft.com/platform/soa/mule-esb-open-source-esb[www.mulesoft.com] or the http://www.mulesoft.com/support-login[Customer Portal]; follow the instructions to link:/mule-user-guide/v/3.5/adding-community-runtime[add the May 2014 Community Runtime] to your new instance of Studio.

To import existing Mule projects into an instance of Anypoint Studio May 2014 with 3.5.0 Runtime, best practice recommends that you create a new workspace in Anypoint Studio, then import any existing projects into your new workspace.

*Without Anypoint Studio*: To migrate from a previous version of Mule ESB 3.5.0 standalone, download and install the May 2014 Enterprise version afresh from http://www.mulesoft.com/platform/soa/mule-esb-open-source-esb[www.mulesoft.com] or the http://www.mulesoft.com/support-login[Customer Portal]; download the Mule ESB 3.5.0 Community standalone from http://www.mulesoft.org/[www.mulesoft.org].


=== Migrating to 3.5.0 Version of Mule Management Console

The 3.5.0 version of MMC requires migration steps that vary according to the version and setup of the MMC you are migrating from. Please either perform a clean install or follow the steps targeted to your current version in the instructions for link:/mule-management-console/v/3.7/upgrading-the-management-console[Upgrading the Management Console].

=== Migrating Applications That Use OAuth2 Connectors

[IMPORTANT]
If your 3.3.X or 3.4.X application uses an OAuth2 connector and you migrate to the May 2014 3.5.0 Runtime, you will likely need to adjust the way you use the connector in your application. See details below.

The May 2014 3.5.0 Runtime introduces a new way of conducting OAuth authorization within applications. If your existing application uses an operation-based connector that uses OAuth2 (see table below), and you intend to run the application using the May 2014 3.5.0 Runtime and use the new version of the connector, then you may need to adjust your application. 

[%header%autowidth.spread]
|===
|Operation-based Connectors Using OAuth2 |Version with New OAuth Behavior
|Salesforce |5.4.7
|Facebook |2.3.2
|Dropbox | 
|Box | 
|Google Calendars |2.0.0
|Google Contacts |2.0.0
|Google Spreadsheets |2.0.0
|Google Tasks |2.0.0
|===

Previous versions of an OAuth-enabled connector handled OAuth authorization using a token id. The connectors stored each user’s OAuth information – access and refresh tokens, token server urls, etc. – in the object store. Because each user of an application has different OAuth information, each token needed to be assigned an id. This mandated that each time your application needed to execute a protected operation, it needed to specify the id of the token to use, which could be a time-consuming hassle. 

With the above-listed versions of OAuth-enabled connectors, the OAuth support in Mule changed so that, by default, all tokens are stored under a key that matches the *connector’s config name*. link:https://blogs.mulesoft.com/dev/mule-dev/mule-oauth2-support-even-easier-still/[Read blog example.]

*Best OOTB Practice:* Do not define any expression to fetch token ids, or delete any that you have configured; rather, rely on Mule's default behavior to access the values for the OAuth information according to the connector's config name. Note that this method is useful only if you have a single user with one set of OAuth information.

==== Advanced or Multitenant Applications

As described above, Mule 3.5.0 runtime accesses OAuth token information stored under a key that matches the connector's config name. This default behavior means that you do not have to explicitly configure the connectors in your application to fetch OAuth token information. However, in more complex applications, or those that involve multitenancy, you can override the above-described default behavior using one of two methods described below.

* Each time an OAuth2 protected operation is found (including Authorize), Mule checks to see if the connector in the flow has its own *accessTokenId expression* (an optional attribute). If it is defined, Mule evaluates the expression, then uses the value accordingly.
* If the in-flow connector doesn't provide its own accessTokenId, then Mule uses the *defaultAcessTokenId expression* configured in the global connector. If it is defined, Mule evaluates the expression, then uses the value accordingly.


=== Migration Considerations

[cols="2*"]
|===
|MULE-6968 |In the previous versions of Mule, when no path was defined on an HTTP endpoint, requests sent to "/" were received; if the path was defined as " " or "/", requests were rejected. With 3.5.0, the HTTP endpoint receives requests if no path was defined, or if the path was defined as " " or "/".
|MULE-7013 |The `keepSendSocketOpen` attribute in the HTTP/S connector is deprecated. Inherited from TCP Connector, this has no effect on outbound HTTP connections and will be removed in the future.
|MULE-7023 |The `keep-alive` attribute in inbound and outbound HTTP/S endpoints is renamed to `keepAlive`.
|MULE-7011 |`org.mule.util.queue.Queue` class now has a `clear()` method to discard all elements in the queue while leaving the queue usable. If you have your own implementation of a Mule Queue, be sure to adjust the configuration to take into account this new behavior.
|MULE-7010 |`ObjectStore` class now has a `clear()` method which discards all elements while leaving the store usable. If you have your own implementation of `ObjectStore`, be sure to adjust the configuration to take into account this new behavior.
|MULE-7090 a|
* Mule uses the default security provider and TLSv1 as the default algorithm for secure socket connections.
* `tlsProtocolHandler` attribute from TLS configuration in SSL, TLS, SMTPS, Jetty HTTPS transports is deprecated and will be ignored. Mule uses the default settings defined in the JVM platform. This parameter is no longer needed in supported JDKs.

|MULE-7061 |Jetty transport now uses Jetty 8. Applications using a custom `jetty.xml` configuration file must update the Jetty classes referenced in this file due to package names changed from version 6 to 7. http://wiki.eclipse.org/Jetty/Starting/Porting_to_Jetty_7/Packages_and_Classes[Read more for details].
|MULE-7138 |MD5MuleEventKeyGenerator is now deprecated. The new implementation is: SHA256MuleEventKeyGenerator.
|MULE-7097 a|
A new configuration file, `conf/tls-default.conf`, has been added. This file defines two properties:

* limit the cipher suites
* protocols used by Mule in SSL sockets

|MULE-7103 a|
The new system property, `mule.security.model`, may be used to alter the security setup of Mule and its modules.

* If _not_ defined, or defined with the value `default`, no restrictions apply and Mule reads the TLS configuration from the `conf/tls-default.conf` file.
* If defined with the value `fips140-2`, Mule works with a FIPS compliant security model: any cryptographic modes of operation not approved in the standard will be disabled. (The PGP module will be disabled, and the TLS configuration properties will be read from `conf/tls-fips140-2.conf`). Note that full FIPS compliance also requires a certified JCE provider installed.

|MULE-7390 a|
Out of the box, the following transformers no longer support external entities:

* xslt-transformer
* dom-to-xml-transformer
* xml-to-dom-transformer
* dom-to-output-handler-transformer
* xquery-transformer

For cases in which external entities processing is needed, the attribute `acceptExternalEntities` has been added for optional configuration (defaults to a value of `false`). Use this attribute with extreme caution in cases in which you trust the source only.

|EE-3509 |Instead of MD5, the cache module uses SHA-256 as the hashing function.
|n/a |cacheJmsSessions is deprecated.
|MULE-7425 |xpath() MEL function no longer changes the message payload when a source is provided. For example, the expression xpath('catalog/cd/title') may change the message payload, while xpath('catalog/cd/title', flowVars['xml']) will not.
|MULE-7439 |org.mule.transport.http.servlet.MuleHttpServletResponse.formatDate now receives a StringBuilder instead of a StringBuffer.
|MULE-7428 |The underlying implementation of Mule queues has changed. To revert to previous behavior you can set system property mule.queue.objectstoremode=true. Old classes were deprecated and moved to package org.mule.util.queue.objectstore.
|MULE-7513 |Attribute secondsBetweenRetries has been deprecated in favor of a new attribute called millisBetweenRetries. This change is backwards compatible. You can still use secondsBetweenRetries although it's not recommended. Setting both attributes at the same time will result in a configuration error.
|MULE-7386 |Class org.mule.module.management.agent.JmxAgent has been renamed to org.mule.module.management.agent.JmxApplicationAgent.
|MULE-7536 |Mule distribution does not provide a lib/shared/default domain for sharing class loading. Now we provide a default Mule domain under domains/default which serves the same purpose and more. You can still use the old shared class loading mechanism by creating the folder lib/shared/default.
|MULE-7524 |Encoded Mule expressions in dynamic endpoints address components are no longer supported.
|MULE-7546 |Implementations of org.mule.api.MuleMessage now need to implement clearAttachments() which was added to the interface. Implementations that extend org.mule.el.context.AbstractMapContext must now implement clear() given this method has been removed from the abstract implementation.
|===

See also xref:junittestfailnote[JUnit Test Fail Note].

== Third-Party Extensions

At this time, not all of the third-party extensions you may have been using with previous versions of Mule ESB have been upgraded to work with Anypoint Studio with 3.5.0 Runtime. https://www.mulesoft.com/support-and-services/mule-esb-support-license-subscription[Contact MuleSoft Support] if you have a question about a specific module.

== See Also

* Refer to MuleSoft’s link:https://docs.mulesoft.com/[Documentation]
* link:/mule-user-guide/v/3.5/[3.5 Mule Runtime]
* https://support.mulesoft.com[Contact MuleSoft]
